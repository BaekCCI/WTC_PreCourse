# kotlin-convenience-store-precourse

## 목표 및 실행 예시

**할인 혜택과 재고 상황을 고려하여 최종 결제 금액을 계산 및 안내하는 결제 시스템 구현**

## 기능 목록

### 관리

1. **_재고 관리_**

- 상품 구매 시, 결제된 수량만큼 즉시 재고에서 차감
- 프로모션 상품 구매 시 프로모션 재고 우선 차감

2. **_프로모션 할인_**

- 조건 1: 오늘 날짜가 프로모션 기간 내에 포함
- 조건 2: 혜택은 프로모션 재고 내에서만 적용
- N개 구매 시 1개 무료 증정
- 프로모션 기간 중이라면 **프로모션 재고 우선 차감 후** 재고 부족 시 일반 재고 사용
- 프로모션 적용 상품에 대해 해당 수량보다 적게 가져온 경우, 추가 구매 여부 물어봄
    - `현재 {상품명}은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)`
- 프로모션 재고 부족으로 인한 혜택 미적용 시, 일부 수량에 대한 정가 결제 안내
    - `현재 {상품명} {수량}개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)`

3. **_멤버십 할인_**

- 구매 금액의 30% 할인
- 프로모션 적용 상품은 할인 적용 X
- 멤버십 할인 최대 한도 = 8,000원

### 입출력

1. **_환영 인사 및 상품 안내_**

- 상품이 프로모션 재고만 존재하는 경우 일반 상품에 대해 '재고 없음' 출력
    ```
    안녕하세요. W편의점입니다.
    현재 보유하고 있는 상품입니다.

  - ${상품명} ${금액}원 ${재고}개 ${프로모션 or ""}
    ```

2. **_상품 구매_**

- 구매할 상품 및 수량을 하이픈으로 구분
- 개별 상품은 대괄호([])로 묶어 쉼표로 구분
    ```
    구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
    ```

3. **_프로모션 적용 가능한 상품에 대해 고객이 해당 수량만큼 가져오지 않았을 경우_**

- 혜택 안내 메세지 출력
    ```
    현재 {상품명}은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
    ```

4. **_프로모션 재고 부족으로 인해 일부 수량을 혜택 없이 결제해야 하는 경우_**

- 일부 수량에 대한 정가 결제 여부 안내 메세지 출력
    ```
    현재 {상품명} {수량}개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)
    ```

5. **_멤버십 할인 여부 안내 메세지 출력_**

    ```
    멤버십 할인을 받으시겠습니까? (Y/N)
    ```

4. **_영수증_**

- 구매 내역 및 할인 내용 출력
- 영수증 항목
    - 구매 상품 내역: 상품명, 수량, 가격
    - 증정 상품 내역: 프로모션 적용으로 무료 제공된 증정 상품 목록
    - 금액 정보
        - 총 구매액: 구매 상품의 총 수량 및 금액
        - 행사 할인: 프로모션 적용으로 인한 할인 금액
        - 멤버십 할인: 멤버십 적용으로 인한 할인 금액
        - 내실 돈: 최종 결제 금액
    ```
    ===========W 편의점=============
    상품명		수량	금액
    콜라		3 	3,000
    에너지바 	5 	10,000
    ===========증	정=============
    콜라		1
    ==============================
    총구매액		8	13,000
    행사할인			-1,000
    멤버십할인		-3,000
    내실돈			 9,000
    ```

5. **_추가 구매 여부 확인 안내 메세지 출력_**
    ```
    감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
    ```

## 예외 처리

- 구매할 상품과 수량 입력 형식이 올바르지 않은 경우:`[ERROR] 올바르지 않은 형식으로 입력했습니다. 다시 입력해 주세요.`
- 존재하지 않는 상품을 입력한 경우:`[ERROR] 존재하지 않는 상품입니다. 다시 입력해 주세요.`
- 구매 수량이 재고 수량을 초과한 경우:`[ERROR] 재고 수량을 초과하여 구매할 수 없습니다. 다시 입력해 주세요.`
- 기타 잘못된 입력의 경우:`[ERROR] 잘못된 입력입니다. 다시 입력해 주세요.`
    - (Y/N) 입력 시 다른 값을 입력한 경우(대소문자는 허용)
    - 상품 수량에 음수 또는 0을 입력한 경우

## 기타 요구사항
- indent(인덴트, 들여쓰기) depth를 3이 넘지 않도록 구현한다. 2까지만 허용한다.
- Enum 클래스를 적용하여 프로그램을 구현한다.
- 구현한 기능에 대한 단위 테스트를 작성한다. 단, UI(System.out, System.in, Scanner) 로직은 제외한다.
- 함수(또는 메서드)의 길이가 10라인을 넘어가지 않도록 구현한다.
- 입출력을 담당하는 클래스를 별도로 구현한다.
- 라이브러리
  - `camp.nextstep.edu.missionutils`에서 제공하는 `DateTimes` 및 `Console` API를 사용하여 구현해야 한다.
  - 현재 날짜와 시간을 가져오려면 `camp.nextstep.edu.missionutils.DateTimes`의 `now()`를 활용한다.
  - 사용자가 입력하는 값은 `camp.nextstep.edu.missionutils.Console`의 `readLine()`을 활용한다.